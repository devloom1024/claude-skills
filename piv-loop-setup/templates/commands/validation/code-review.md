---
description: 执行技术代码审查
argument-hint: [可选：要审查的文件]
---

# /piv:code-review：技术代码审查

## 范围

审查自上次提交以来的更改文件，或指定文件：`$ARGUMENTS`

## 审查类别

### 1. 逻辑错误

- 边界条件
- 条件错误
- 缺少错误处理
- 竞态条件

### 2. 安全问题

- SQL 注入
- XSS 漏洞
- 不安全的数据处理
- 身份验证/授权漏洞

### 3. 性能问题

- N+1 查询
- 低效算法
- 内存泄漏
- 不必要的迭代

### 4. 代码质量

- DRY 原则违反
- 复杂函数（>20 行）
- 命名不佳
- 缺少文档

### 5. 规范遵从性

- 代码风格标准
- 文档模式
- 测试覆盖率要求

## 输出格式

保存到 `.agents/code-reviews/[功能名]-[时间戳].md`：

```yaml
severity: critical|high|medium|low
file: path/to/file.ext
line: N
issue: [单行描述]
detail: |
  [详细解释]
suggestion: |
  [修复建议]
```

## 统计摘要

```markdown
## 代码审查摘要

| 类别 | 严重 | 高 | 中 | 低 |
|------|------|----|----|-----|
| 逻辑 | X    | Y  | Z  | W  |
| 安全 | X    | Y  | Z  | W  |
| 性能 | X    | Y  | Z  | W  |
| 质量 | X    | Y  | Z  | W  |
| 总计 | X    | Y  | Z  | W  |

## 审查的文件
- `file1.ext`
- `file2.ext`

## 严重问题
1. [问题] - `file:行号` - [单行摘要]

## 高优先级问题
1. [问题] - `file:行号` - [单行摘要]

## 建议
- [可执行的建议 1]
- [可执行的建议 2]
```
